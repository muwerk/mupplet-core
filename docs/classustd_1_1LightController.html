<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>muwerk mupplet Core Library: ustd::LightController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">muwerk mupplet Core Library
   </div>
   <div id="projectbrief">muwerk applets; mupplets: functional units that support specific hardware or reusable applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceustd.html">ustd</a></li><li class="navelem"><a class="el" href="classustd_1_1LightController.html">LightController</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classustd_1_1LightController-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ustd::LightController Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classustd_1_1Light.html" title="mupplet-core GPIO Light class">Light</a> Controller Class.  
 <a href="classustd_1_1LightController.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="light__controller_8h_source.html">light_controller.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:abc85697ec510ff1488f56ffcdb974245"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> {  }</td></tr>
<tr class="separator:abc85697ec510ff1488f56ffcdb974245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd1b4413389ed4d83be84288b4aed42"><td class="memItemLeft" align="right" valign="top">typedef std::function&lt; void(bool state, double level, bool control, bool notify)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a6bd1b4413389ed4d83be84288b4aed42">T_CONTROL</a></td></tr>
<tr class="memdesc:a6bd1b4413389ed4d83be84288b4aed42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware Control Function.  <a href="classustd_1_1LightController.html#a6bd1b4413389ed4d83be84288b4aed42">More...</a><br /></td></tr>
<tr class="separator:a6bd1b4413389ed4d83be84288b4aed42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afc7f2973714a1a9d4b1d8bfab6ff8147"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#afc7f2973714a1a9d4b1d8bfab6ff8147">LightController</a> ()</td></tr>
<tr class="separator:afc7f2973714a1a9d4b1d8bfab6ff8147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e163315be5ee193ca0ee2c417685d75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a9e163315be5ee193ca0ee2c417685d75">begin</a> (<a class="el" href="classustd_1_1LightController.html#a6bd1b4413389ed4d83be84288b4aed42">T_CONTROL</a> controller, bool initialState=false)</td></tr>
<tr class="separator:a9e163315be5ee193ca0ee2c417685d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a2efb3484a6764c33bf29f7232d201"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#aa3a2efb3484a6764c33bf29f7232d201">loop</a> ()</td></tr>
<tr class="separator:aa3a2efb3484a6764c33bf29f7232d201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e66391fd440438d289cb375f646865b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a6e66391fd440438d289cb375f646865b">commandParser</a> (String command, String args)</td></tr>
<tr class="separator:a6e66391fd440438d289cb375f646865b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f4de0cd5fcc3b34c564f728f259b3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a36f4de0cd5fcc3b34c564f728f259b3a">set</a> (bool state)</td></tr>
<tr class="separator:a36f4de0cd5fcc3b34c564f728f259b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5e49115ab7450c89c4674130a1aef3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a5c5e49115ab7450c89c4674130a1aef3">brightness</a> (double level)</td></tr>
<tr class="separator:a5c5e49115ab7450c89c4674130a1aef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeccc32fa82ca3895ecae0e7c2a41be7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#aeccc32fa82ca3895ecae0e7c2a41be7f">setMode</a> (<a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> mode, unsigned int interval_ms=1000, double phase_unit=0.0, String pattern=&quot;&quot;)</td></tr>
<tr class="separator:aeccc32fa82ca3895ecae0e7c2a41be7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1feaccf15e4df739c24cfbed0b918310"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a1feaccf15e4df739c24cfbed0b918310">setMinMaxWaveBrightness</a> (double minBrightness, double maxBrightness)</td></tr>
<tr class="separator:a1feaccf15e4df739c24cfbed0b918310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770339a53f86c60b74ec56e9712e6aa8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1LightController.html#a770339a53f86c60b74ec56e9712e6aa8">forceState</a> (bool state, double brightlevel)</td></tr>
<tr class="separator:a770339a53f86c60b74ec56e9712e6aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The <a class="el" href="classustd_1_1Light.html" title="mupplet-core GPIO Light class">Light</a> Controller Class. </p>
<p >This class is useful to implement mupplets for things that behave like a light. It supports switching the unit on and off and setting the light intensity. Addionally automatic light effects are supported (see <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> and <a class="el" href="classustd_1_1LightController.html#aeccc32fa82ca3895ecae0e7c2a41be7f">setMode</a>) </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a6bd1b4413389ed4d83be84288b4aed42" name="a6bd1b4413389ed4d83be84288b4aed42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd1b4413389ed4d83be84288b4aed42">&#9670;&#160;</a></span>T_CONTROL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::function&lt;void(bool state, double level, bool control, bool notify)&gt; <a class="el" href="classustd_1_1LightController.html#a6bd1b4413389ed4d83be84288b4aed42">ustd::LightController::T_CONTROL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hardware Control Function. </p>
<p >The hardware control function is called every time when the state of the light shall change or when the state shall be notified.</p>
<p >state: The logical state of the light: <code>true</code> if the light is on, <code>false</code> if the light is off. level: The brightness level of the light. The value ranges between 0.0 and 1.0 control: If <code>true</code> the hardware shall be set to the supplied values. notify: If <code>true</code> the current state and brightness level shall be notified to whom it may concern. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="abc85697ec510ff1488f56ffcdb974245" name="abc85697ec510ff1488f56ffcdb974245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc85697ec510ff1488f56ffcdb974245">&#9670;&#160;</a></span>Mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">ustd::LightController::Mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The light operation mode </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abc85697ec510ff1488f56ffcdb974245ac09edcdf890cd65289a29ecb8e6239a6" name="abc85697ec510ff1488f56ffcdb974245ac09edcdf890cd65289a29ecb8e6239a6"></a>Blink&#160;</td><td class="fielddoc"><p ><a class="el" href="classustd_1_1Light.html" title="mupplet-core GPIO Light class">Light</a> is controlled by API or external events, used for on/off and brightness modes. No automatic state changes </p>
</td></tr>
<tr><td class="fieldname"><a id="abc85697ec510ff1488f56ffcdb974245af153509004141a8067dea2f06626357a" name="abc85697ec510ff1488f56ffcdb974245af153509004141a8067dea2f06626357a"></a>Wave&#160;</td><td class="fielddoc"><p >Blink the light with a given frequency. The light is automatically controlled by the mupplet until a manual state override is given. </p>
</td></tr>
<tr><td class="fieldname"><a id="abc85697ec510ff1488f56ffcdb974245ac678c6d1fd15a12ae02d0c1cd17208c2" name="abc85697ec510ff1488f56ffcdb974245ac678c6d1fd15a12ae02d0c1cd17208c2"></a>Pulse&#160;</td><td class="fielddoc"><p >This modulates the light with a soft pulsing wave effect, automatic mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="abc85697ec510ff1488f56ffcdb974245a1a24d57dbedb027a0e8043681fa04481" name="abc85697ec510ff1488f56ffcdb974245a1a24d57dbedb027a0e8043681fa04481"></a>Pattern&#160;</td><td class="fielddoc"><p >One-time pulse for a given length, automatic mode while pulse is active.</p>
<p >Plays an (optionally) repeating pattern, e.g. to signal a system state. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afc7f2973714a1a9d4b1d8bfab6ff8147" name="afc7f2973714a1a9d4b1d8bfab6ff8147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc7f2973714a1a9d4b1d8bfab6ff8147">&#9670;&#160;</a></span>LightController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ustd::LightController::LightController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Instantiates a <a class="el" href="classustd_1_1LightController.html" title="The Light Controller Class.">LightController</a> instance</p>
<p >No hardware interaction is performed, until <a class="el" href="classustd_1_1LightController.html#a9e163315be5ee193ca0ee2c417685d75">begin()</a> is called.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9e163315be5ee193ca0ee2c417685d75" name="a9e163315be5ee193ca0ee2c417685d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e163315be5ee193ca0ee2c417685d75">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classustd_1_1LightController.html#a6bd1b4413389ed4d83be84288b4aed42">T_CONTROL</a>&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>initialState</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Initiate operation</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>The controller function that controls the hardware and publishes state messages. </td></tr>
    <tr><td class="paramname">initialState</td><td>Initial logical state of the light.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c5e49115ab7450c89c4674130a1aef3" name="a5c5e49115ab7450c89c4674130a1aef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5e49115ab7450c89c4674130a1aef3">&#9670;&#160;</a></span>brightness()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::brightness </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set light brighness level </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Brightness level [0.0 (off) - 1.0 (on)]</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e66391fd440438d289cb375f646865b" name="a6e66391fd440438d289cb375f646865b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e66391fd440438d289cb375f646865b">&#9670;&#160;</a></span>commandParser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::LightController::commandParser </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >A command parser method for the light</p>
<p >This function acceps <b>commands</b> and their optional arguments. Usually commands in mupplets are sent be publishing messages to specific topics containing the command as the last part of the topic. The most efficient method for processing commands from message subscriptions would be:</p>
<div class="fragment"><div class="line">pSched-&gt;subscribe(tID, name + <span class="stringliteral">&quot;/light/#&quot;</span>, [<span class="keyword">this</span>](String topic, String msg, String orig) {</div>
<div class="line">    this-&gt;light.commandParser(topic.substring(name.length() + 7), msg);</div>
<div class="line">});</div>
</div><!-- fragment --><p >If the topic <code>&lt;muppletname&gt;/light/</code> shoudl support additonal commands, a typical implementation would be like:</p>
<div class="fragment"><div class="line">pSched-&gt;subscribe(tID, name + <span class="stringliteral">&quot;/light/#&quot;</span>, [<span class="keyword">this</span>](String topic, String msg, String orig) {</div>
<div class="line">    topic = topic.substring(name.length() + 7);</div>
<div class="line"> </div>
<div class="line">    if (this-&gt;light.commandParser(topic, msg)) {</div>
<div class="line">        <span class="comment">// command was processed in light controller</span></div>
<div class="line">        return;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    if (topic == <span class="stringliteral">&quot;mycommand&quot;</span>) {</div>
<div class="line">        <span class="comment">// do my stuff...</span></div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;myothercommand&quot;</span>) {</div>
<div class="line">        <span class="comment">// do my other stuff</span></div>
<div class="line">    }</div>
<div class="line">});</div>
</div><!-- fragment --><p >The following commands are supported:</p>
<p ><code>set</code> - set the light on/off or to a specific intensity <code>mode/set</code> - change the mode - see <a class="el" href="classustd_1_1LightController.html#aeccc32fa82ca3895ecae0e7c2a41be7f">setMode</a> for details <code>unitbrightness/get</code> - notify the current status</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>The command to parse </td></tr>
    <tr><td class="paramname">args</td><td>The arguments to the command</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a770339a53f86c60b74ec56e9712e6aa8" name="a770339a53f86c60b74ec56e9712e6aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a770339a53f86c60b74ec56e9712e6aa8">&#9670;&#160;</a></span>forceState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::forceState </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>brightlevel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Force the internal state and brightness to a specific value. Useful to fix the internal state in case the hardware is not able to display the requested state. This can usually happen if the brightness is so low that the hardware switches off. e.g.: if a led is moduled via a PWM with only 256 steps, it may happen that a very low brightness will result in the PWM value 0 -&gt; the led is switched off. The implementation will than force the state to <code>false, 0.0</code>:</p>
<div class="fragment"><div class="line">...</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state &amp;&amp; level &gt; 0.0) {</div>
<div class="line">    <span class="comment">// led is dimmed</span></div>
<div class="line">    uint16_t bri = (uint16_t)(level * (<span class="keywordtype">double</span>)pwmrange);</div>
<div class="line">    <span class="keywordflow">if</span> (bri) {</div>
<div class="line">        <span class="keywordflow">if</span> (!activeLogic)</div>
<div class="line">            bri = pwmrange - bri;</div>
<div class="line">        ledcWrite(channel, bri);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        light.forceState(<span class="keyword">false</span>, 0.0);</div>
<div class="line">        onLightControl(<span class="keyword">false</span>, 0.0, control, notify);</div>
<div class="line">    }</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">...</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Logical state of the light: true=on, false=off. </td></tr>
    <tr><td class="paramname">brightlevel</td><td>Brightness level of the light [0.0 (off) - 1.0 (on)]</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3a2efb3484a6764c33bf29f7232d201" name="aa3a2efb3484a6764c33bf29f7232d201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3a2efb3484a6764c33bf29f7232d201">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >The loop method This function <b>must</b> be called in the loop method of the mupplet. In order to get smoth effects, this function should be called every 50ms.</p>

</div>
</div>
<a id="a36f4de0cd5fcc3b34c564f728f259b3a" name="a36f4de0cd5fcc3b34c564f728f259b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f4de0cd5fcc3b34c564f728f259b3a">&#9670;&#160;</a></span>set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::set </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set light to a given logical state. A light mupplet usually sends the following messages on state change: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">topic   </th><th class="markdownTableHeadNone">message body   </th><th class="markdownTableHeadNone">comment    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>&lt;prefix&gt;/unitbrightness</code>   </td><td class="markdownTableBodyNone">normalized brightness [0.0-1.0]   </td><td class="markdownTableBodyNone"><code>0.34</code>: Float value encoded as string. Not send on automatic changes (e.g. pulse mode)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>&lt;prefix&gt;/state</code>   </td><td class="markdownTableBodyNone"><code>on</code> or <code>off</code>   </td><td class="markdownTableBodyNone">Current light state (<code>on</code> is not sent on brightness intermediate values)   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>true=on, false=off.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1feaccf15e4df739c24cfbed0b918310" name="a1feaccf15e4df739c24cfbed0b918310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1feaccf15e4df739c24cfbed0b918310">&#9670;&#160;</a></span>setMinMaxWaveBrightness()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::setMinMaxWaveBrightness </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>minBrightness</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxBrightness</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set minimum and maximum brightness in wave <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> Useful to compensate, if a light stays at similar brightness for a range of input values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">minBrightness</td><td>Minimum brightness 0-1.0 </td></tr>
    <tr><td class="paramname">maxBrightness</td><td>Maximum brightness 0-1.0</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeccc32fa82ca3895ecae0e7c2a41be7f" name="aeccc32fa82ca3895ecae0e7c2a41be7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeccc32fa82ca3895ecae0e7c2a41be7f">&#9670;&#160;</a></span>setMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::LightController::setMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>interval_ms</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>phase_unit</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>pattern</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set light mode to given <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td><a class="el" href="classustd_1_1Light.html" title="mupplet-core GPIO Light class">Light</a> <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245">Mode</a> </td></tr>
    <tr><td class="paramname">interval_ms</td><td>Duration of blink in <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245ac09edcdf890cd65289a29ecb8e6239a6">Mode::Blink</a> or pulse duration. </td></tr>
    <tr><td class="paramname">phase_unit</td><td>Phase difference used to synchronize different lights in Wave or blink mode. A phase_unit of 0 synchronizes the given lights. phase-difference is in [0.0-1.0]. A phase difference of 0.5 (180 degrees) between two leds would let leds blink reversed. </td></tr>
    <tr><td class="paramname">pattern</td><td>Only in <a class="el" href="classustd_1_1LightController.html#abc85697ec510ff1488f56ffcdb974245a1a24d57dbedb027a0e8043681fa04481">Mode::Pattern</a>: a pattern string consisting of the characters '+' (on), '-' (off), '0'-'9' (brightness 0%-100%), or at the end of the string 'r' for endless repeat. Intervall_ms is the time for each pattern step. Example "++-r" with intervall_ms=100 lights the led for 200ms on, 100ms off and repeats. "1---------r" makes a faint 100ms flash every second. "0135797531r" simulates a wave.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/helper/<a class="el" href="light__controller_8h_source.html">light_controller.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
